(this["webpackJsonpsharing-cities-demo"]=this["webpackJsonpsharing-cities-demo"]||[]).push([[0],{162:function(e,t){},169:function(e,t,a){},175:function(e,t,a){e.exports=a.p+"static/media/room2.2b221fd9.glb"},177:function(e){e.exports=JSON.parse('[{"sensordatavalues":[{"value_type":"P1","id":8674086291,"value":"5.23"},{"value_type":"P2","id":8674086292,"value":"1.30"}],"location":{"altitude":"4.2","latitude":"59.308","country":"SE","indoor":0,"id":9946,"exact_location":0,"longitude":"18.108"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":19597},"timestamp":"2019-07-01 10:54:09","id":4092041776,"sampling_rate":null},{"sensordatavalues":[{"value_type":"humidity","id":8674086533,"value":"96.50"},{"value_type":"temperature","id":8674086531,"value":"20.10"}],"location":{"altitude":"4.2","latitude":"59.308","country":"SE","indoor":0,"id":9946,"exact_location":0,"longitude":"18.108"},"sensor":{"sensor_type":{"id":9,"manufacturer":"various","name":"DHT22"},"pin":"7","id":19598},"timestamp":"2019-07-01 10:54:10","id":4092041892,"sampling_rate":null},{"sensordatavalues":[{"value_type":"P1","id":8674090487,"value":"4.90"},{"value_type":"P2","id":8674090488,"value":"1.97"}],"location":{"altitude":"9.5","latitude":"59.302","country":"SE","indoor":0,"id":11208,"exact_location":0,"longitude":"18.108"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":22082},"timestamp":"2019-07-01 10:54:27","id":4092043756,"sampling_rate":null},{"sensordatavalues":[{"value_type":"humidity","id":8674090743,"value":"99.90"},{"value_type":"temperature","id":8674090742,"value":"20.50"}],"location":{"altitude":"9.5","latitude":"59.302","country":"SE","indoor":0,"id":11208,"exact_location":0,"longitude":"18.108"},"sensor":{"sensor_type":{"id":9,"manufacturer":"various","name":"DHT22"},"pin":"7","id":22083},"timestamp":"2019-07-01 10:54:28","id":4092043875,"sampling_rate":null},{"sensordatavalues":[{"value_type":"P1","id":8674099867,"value":"11.95"},{"value_type":"P2","id":8674099885,"value":"1.90"}],"location":{"altitude":"8.9","latitude":"59.30342140000","country":"SE","indoor":0,"id":13685,"exact_location":1,"longitude":"18.09958930000"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":25862},"timestamp":"2019-07-01 10:55:05","id":4092048195,"sampling_rate":null},{"sensordatavalues":[{"value_type":"humidity","id":8674100441,"value":"59.60"},{"value_type":"pressure","id":8674100443,"value":"99647.24"},{"value_type":"temperature","id":8674100428,"value":"21.09"},{"value_type":"pressure_at_sealevel","value":99750.24}],"location":{"altitude":"8.9","latitude":"59.30342140000","country":"SE","indoor":0,"id":13685,"exact_location":1,"longitude":"18.09958930000"},"sensor":{"sensor_type":{"id":17,"manufacturer":"Bosch","name":"BME280"},"pin":"11","id":25863},"timestamp":"2019-07-01 10:55:06","id":4092048456,"sampling_rate":null},{"sensordatavalues":[{"value_type":"P1","id":8674105551,"value":"1.95"},{"value_type":"P2","id":8674105564,"value":"1.40"}],"location":{"altitude":"4.8","latitude":"59.304","country":"SE","indoor":0,"id":8944,"exact_location":0,"longitude":"18.102"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":17650},"timestamp":"2019-07-01 10:55:19","id":4092050848,"sampling_rate":null},{"sensordatavalues":[{"value_type":"P1","id":8674111104,"value":"5.12"},{"value_type":"P2","id":8674111106,"value":"3.35"}],"location":{"altitude":"14.5","latitude":"59.302","country":"SE","indoor":0,"id":9543,"exact_location":0,"longitude":"18.1"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":18828},"timestamp":"2019-07-01 10:55:40","id":4092053447,"sampling_rate":null},{"sensordatavalues":[{"value_type":"humidity","id":8674111364,"value":"60.80"},{"value_type":"temperature","id":8674111363,"value":"22.30"}],"location":{"altitude":"14.5","latitude":"59.302","country":"SE","indoor":0,"id":9543,"exact_location":0,"longitude":"18.1"},"sensor":{"sensor_type":{"id":9,"manufacturer":"various","name":"DHT22"},"pin":"7","id":18829},"timestamp":"2019-07-01 10:55:41","id":4092053569,"sampling_rate":null},{"sensordatavalues":[{"value_type":"P1","id":8674124548,"value":"4.20"},{"value_type":"P2","id":8674124549,"value":"0.83"}],"location":{"altitude":"4.2","latitude":"59.308","country":"SE","indoor":0,"id":9946,"exact_location":0,"longitude":"18.108"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":19597},"timestamp":"2019-07-01 10:56:38","id":4092059748,"sampling_rate":null},{"sensordatavalues":[{"value_type":"humidity","id":8674124781,"value":"98.70"},{"value_type":"temperature","id":8674124777,"value":"19.50"}],"location":{"altitude":"4.2","latitude":"59.308","country":"SE","indoor":0,"id":9946,"exact_location":0,"longitude":"18.108"},"sensor":{"sensor_type":{"id":9,"manufacturer":"various","name":"DHT22"},"pin":"7","id":19598},"timestamp":"2019-07-01 10:56:39","id":4092059857,"sampling_rate":null},{"sensordatavalues":[{"value_type":"P1","id":8674128872,"value":"8.63"},{"value_type":"P2","id":8674128873,"value":"1.90"}],"location":{"altitude":"9.5","latitude":"59.302","country":"SE","indoor":0,"id":11208,"exact_location":0,"longitude":"18.108"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":22082},"timestamp":"2019-07-01 10:56:56","id":4092061792,"sampling_rate":null},{"sensordatavalues":[{"value_type":"humidity","id":8674129092,"value":"99.90"},{"value_type":"temperature","id":8674129091,"value":"19.80"}],"location":{"altitude":"9.5","latitude":"59.302","country":"SE","indoor":0,"id":11208,"exact_location":0,"longitude":"18.108"},"sensor":{"sensor_type":{"id":9,"manufacturer":"various","name":"DHT22"},"pin":"7","id":22083},"timestamp":"2019-07-01 10:56:57","id":4092061894,"sampling_rate":null},{"sensordatavalues":[{"value_type":"P1","id":8674138060,"value":"8.30"},{"value_type":"P2","id":8674138061,"value":"1.63"}],"location":{"altitude":"8.9","latitude":"59.30342140000","country":"SE","indoor":0,"id":13685,"exact_location":1,"longitude":"18.09958930000"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":25862},"timestamp":"2019-07-01 10:57:33","id":4092066114,"sampling_rate":null},{"sensordatavalues":[{"value_type":"humidity","id":8674138419,"value":"59.98"},{"value_type":"pressure","id":8674138420,"value":"99640.07"},{"value_type":"temperature","id":8674138418,"value":"20.81"},{"value_type":"pressure_at_sealevel","value":99743.16}],"location":{"altitude":"8.9","latitude":"59.30342140000","country":"SE","indoor":0,"id":13685,"exact_location":1,"longitude":"18.09958930000"},"sensor":{"sensor_type":{"id":17,"manufacturer":"Bosch","name":"BME280"},"pin":"11","id":25863},"timestamp":"2019-07-01 10:57:34","id":4092066285,"sampling_rate":null},{"sensordatavalues":[{"value_type":"P1","id":8674149471,"value":"5.97"},{"value_type":"P2","id":8674149472,"value":"1.85"}],"location":{"altitude":"14.5","latitude":"59.302","country":"SE","indoor":0,"id":9543,"exact_location":0,"longitude":"18.1"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":18828},"timestamp":"2019-07-01 10:58:09","id":4092071464,"sampling_rate":null},{"sensordatavalues":[{"value_type":"humidity","id":8674149789,"value":"60.60"},{"value_type":"temperature","id":8674149779,"value":"22.30"}],"location":{"altitude":"14.5","latitude":"59.302","country":"SE","indoor":0,"id":9543,"exact_location":0,"longitude":"18.1"},"sensor":{"sensor_type":{"id":9,"manufacturer":"various","name":"DHT22"},"pin":"7","id":18829},"timestamp":"2019-07-01 10:58:11","id":4092071611,"sampling_rate":null},{"sensordatavalues":[{"value_type":"P1","id":8674153164,"value":"3.30"},{"value_type":"P2","id":8674153166,"value":"1.30"}],"location":{"altitude":"4.8","latitude":"59.304","country":"SE","indoor":0,"id":8944,"exact_location":0,"longitude":"18.102"},"sensor":{"sensor_type":{"id":14,"manufacturer":"Nova Fitness","name":"SDS011"},"pin":"1","id":17650},"timestamp":"2019-07-01 10:58:26","id":4092073187,"sampling_rate":null}]')},206:function(e,t,a){e.exports=a(228)},211:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},224:function(e,t){},227:function(e,t,a){},228:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a.n(n),o=a(136),r=a.n(o),s=(a(211),a(50)),l=a(22),c=a(4),u=(a(212),a(172)),d=a(64),m=a(95),p=a(138),h=a(45),v=a(173),y=a(174),f=a.n(y),g=function(){function e(){Object(d.a)(this,e),this.camera=new c.Q(60,window.innerWidth/window.innerHeight,1,5e3),this.defaultPosition=new c.mb(0,0,-3e3),this.defaultRotation=new c.j(0,Math.PI,0),this.camera.position.copy(this.defaultPosition),this.camera.rotation.copy(this.defaultRotation),this.transitionInfo={targetPosition:null,targetRotation:null},this.positionTween=null,this.rotationTween=null}return Object(m.a)(e,[{key:"goToOverview",value:function(){this.transition(this.defaultPosition,this.defaultRotation)}},{key:"goToSurface",value:function(e){if(null!==e){this.camera.up.copy(e.mesh.up);var t=c.C.degToRad(this.camera.fov),a=200/window.innerHeight,n=e.height/(1-a)/(2*Math.tan(t/2)),i=new c.mb;e.mesh.getWorldPosition(i);var o=new c.mb;e.mesh.getWorldDirection(o),o.multiplyScalar(n),o.add(i);var r=this.camera.position.clone(),s=this.camera.rotation.clone();this.camera.position.copy(o),this.camera.lookAt(i);var l=this.camera.rotation.clone();this.camera.position.copy(r),this.camera.rotation.copy(s),this.transition(o,l)}else this.goToOverview()}},{key:"transition",value:function(e,t){var a=this;this.transitionInfo={targetPosition:e,targetRotation:t};this.positionTween=new h.Tween(this.camera.position).easing(h.Easing.Cubic.Out).to({x:e.x,y:e.y,z:e.z},800).start();var n=new c.W;n.setFromEuler(this.camera.rotation);var i=new c.W;i.setFromEuler(t);var o=new c.W;this.rotationTween=new h.Tween({t:0}).to({t:1},800).easing(h.Easing.Cubic.Out).on("update",(function(e){var t=e.t;c.W.slerp(n,i,o,t),a.camera.quaternion.copy(o)})).start()}},{key:"isTransitionRunning",value:function(){return null!==this.positionTween&&null!==this.rotationTween&&(this.positionTween.isPlaying()||this.rotationTween.isPlaying())}},{key:"toCamera",value:function(e){var t=this.camera.position.clone(),a=this.camera.rotation.clone(),n=this.isTransitionRunning();n&&(this.camera.position.copy(this.transitionInfo.targetPosition),this.camera.rotation.copy(this.transitionInfo.targetRotation));var i=c.C.degToRad(this.camera.fov),o=160/window.innerHeight,r=e.height/(1-o)/(2*Math.tan(i/2)),s=new c.mb;this.camera.getWorldPosition(s);var l=new c.mb;this.camera.getWorldDirection(l),l.multiplyScalar(r),l.add(s);var u=e.mesh.position.clone(),d=e.mesh.rotation.clone();e.mesh.position.copy(l),e.mesh.lookAt(s);var m=e.mesh.rotation.clone();return e.mesh.position.copy(u),e.mesh.rotation.copy(d),n&&(this.camera.position.copy(t),this.camera.rotation.copy(a)),[l,m]}}]),e}(),w=a(175),b=a.n(w),E=new g,_=new c.bb,O=new c.bb,S=new c.bb,j={glScene:_,cssScene:S,camera:E},P=new c.c(200,200,200),x=new c.G({color:16711680,emissive:0,specular:1118481,side:c.i,flatShading:!1,shininess:30}),T=new c.E(P,x);T.position.z=-250,T.position.x=250,T.position.y=250,_.add(T);var k=new c.E(P,x.clone());k.castShadow=!0,k.material.transparent=!0,k.material.opacity=0,k.position.copy(T.position),O.add(k),(new v.a).load(b.a,(function(e){e.scene.scale.multiplyScalar(100),e.scene.rotation.y=Math.PI,e.scene.position.y=-550,e.scene.position.z=-500,e.scene.position.x=-2280,e.scene.children[0].receiveShadow=!0,O.add(e.scene)}));var N=new c.S(16777215,.8,0,2);N.castShadow=!0,N.position.z=-1e3,N.shadow.mapSize.width=2048,N.shadow.mapSize.height=2048,N.shadow.camera.near=.5,N.shadow.camera.far=5e3,_.add(N),O.add((new c.S).copy(N));var C=new c.pb({alpha:!0});C.setClearColor(0,0),C.setPixelRatio(window.devicePixelRatio),C.setSize(window.innerWidth,window.innerHeight),C.domElement.style.position="absolute",C.domElement.style.top=0,C.domElement.style.left=0,C.shadowMap.enabled=!0,document.getElementById("canvas").appendChild(C.domElement);var D=new p.b;D.setSize(window.innerWidth,window.innerHeight),D.domElement.style.position="absolute",D.domElement.style.top=0,D.domElement.style.left=0,document.getElementById("canvas").appendChild(D.domElement);var W=new c.pb({alpha:!0});W.setClearColor(0,0),W.setPixelRatio(window.devicePixelRatio),W.setSize(window.innerWidth,window.innerHeight),W.domElement.style.position="absolute",W.domElement.style.top=0,W.domElement.style.left=0,W.domElement.style.pointerEvents="none",document.getElementById("canvas").appendChild(W.domElement);var z=f()((function(){E.camera.aspect=window.innerWidth/window.innerHeight,E.camera.updateProjectionMatrix(),C.setSize(window.innerWidth,window.innerHeight),D.setSize(window.innerWidth,window.innerHeight),W.setSize(window.innerWidth,window.innerHeight)}),100);window.addEventListener("resize",z);var F=function(){C.render(O,E.camera),D.render(S,E.camera),W.render(_,E.camera)};!function e(t){requestAnimationFrame(e),T.rotation.x+=.01,k.rotation.x+=.01,T.rotation.y+=.01,k.rotation.y+=.01,C.render(O,E.camera),D.render(S,E.camera),W.render(_,E.camera),Object(h.update)(t)}();a(169);var R=new c.F({opacity:0,color:0,side:c.i,blending:c.M}),H=function(){function e(){Object(d.a)(this,e),this.initialize.apply(this,arguments)}return Object(m.a)(e,[{key:"initialize",value:function(e){var t=this,a=e.width,n=e.height,i=e.position,o=e.rotation,r=e.up,s=e.glScene,l=e.cssScene,u=e.camera,d=(e.isClickable,e.resolutionScale),m=void 0===d?1:d,h=e.parent,v=void 0===h?null:h;this.width=a,this.height=n,this.resolutionScale=m,this.originalPosition=i.clone(),this.originalRotation=o.clone(),this.originalUp=r.clone(),this.atOriginalPosition=!0,this.parent=v,this.camera=u,this.element=document.createElement("div"),this.element.style.width="".concat(a*this.resolutionScale,"px"),this.element.style.height="".concat(n*this.resolutionScale,"px"),this.element.style.opacity=1,this.object=new p.a(this.element),this.object.position.copy(i),this.object.rotation.copy(o),this.object.scale.set(1/this.resolutionScale,1/this.resolutionScale,1/this.resolutionScale),this.geometry=new c.R(a,n),this.mesh=new c.E(this.geometry,R),this.mesh.position.copy(i),this.mesh.rotation.copy(o),this.mesh.up=r,this.mesh.castShadow=!1,this.mesh.receiveShadow=!0,s.add(this.mesh),l.add(this.object),F(),this.destroy=function(){s.remove(t.mesh),l.remove(t.object),F()}}},{key:"updateLayout",value:function(e,t,a){this.originalPosition=e.clone(),this.originalRotation=t.clone(),this.originalUp=a.clone(),this.object.position.copy(e),this.object.rotation.copy(t),this.mesh.position.copy(e),this.mesh.rotation.copy(t),this.mesh.up=a}},{key:"moveToCamera",value:function(){var e=this.camera.toCamera(this),t=Object(s.a)(e,2),a=t[0],n=t[1];this.mesh.position.manhattanDistanceTo(a)<Number.EPSILON||(this.moveTransition(a,n),this.atOriginalPosition=!1)}},{key:"moveToOriginal",value:function(){this.mesh.position.manhattanDistanceTo(this.originalPosition)<Number.EPSILON||(this.moveTransition(this.originalPosition,this.originalRotation),this.atOriginalPosition=!0)}},{key:"moveToggle",value:function(){this.atOriginalPosition?this.moveToCamera():this.moveToOriginal()}},{key:"moveTransition",value:function(e,t){var a=this;new h.Tween(this.object.position).easing(h.Easing.Cubic.Out).to({x:e.x,y:e.y,z:e.z},200).start(),new h.Tween(this.mesh.position).easing(h.Easing.Cubic.Out).to({x:e.x,y:e.y,z:e.z},200).start();var n=new c.W;n.setFromEuler(this.mesh.rotation);var i=new c.W;i.setFromEuler(t);var o=new c.W;new h.Tween({t:0}).to({t:1},200).easing(h.Easing.Cubic.Out).on("update",(function(e){var t=e.t;c.W.slerp(n,i,o,t),a.mesh.quaternion.copy(o),a.object.quaternion.copy(o)})).start()}}]),e}();var I=function(e){var t=Object(n.useRef)(null),a=Object(n.useCallback)((function(){return null!==t.current?t.current:(t.current=new H(e),t.current)}),[e]);return Object(n.useEffect)((function(){a().updateLayout(e.position,e.rotation,e.up)}),[a,e.position,e.rotation,e.up]),Object(n.useEffect)((function(){return function(){t.current.destroy()}}),[]),Object(o.createPortal)(i.a.createElement("div",{className:"surface",style:{fontSize:"".concat(10*a().resolutionScale,"px")}},Object(n.cloneElement)(e.children,{surface:a()})),a().element)},M=Object(n.createContext)({cameraView:null,setCameraView:null});function V(e){return function(t){var a=Object(n.useContext)(M),o=a.cameraView,r=a.setCameraView,s=o===t.surface,l=null===o;return i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"surface__content ".concat(s?"":"surface__content--no-pointer")},i.a.createElement(e,t)),i.a.createElement("div",{className:"surface__overlay ".concat(l?"":"surface__overlay--hidden"),onClick:function(){return r(t.surface)}}))}}a(219);var B=V((function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),o=a[0],r=a[1],l=Object(n.useContext)(M).cameraView===e.surface;return i.a.createElement("div",{className:"test"},i.a.createElement("h1",null,"Hello World"),i.a.createElement("p",null,o),l&&i.a.createElement("h3",null,"Camera is here"),i.a.createElement("button",{onClick:function(){return r(o+1)}},"Click me"))})),L=a(182);function U(e,t,a){var i=Object(n.useState)(null),o=Object(s.a)(i,2),r=o[0],l=o[1];return Object(n.useLayoutEffect)((function(){var a=e.geometry.getAttribute("position"),n=e.mesh.localToWorld(new c.mb(a.getX(0),a.getY(0),a.getZ(0))),i=new c.mb;e.mesh.getWorldPosition(i);var o=(new c.mb).subVectors(e.mesh.localToWorld(new c.mb(1,0,0)),i),r=(new c.mb).subVectors(e.mesh.localToWorld(new c.mb(0,-1,0)),i),s=new c.mb;e.mesh.getWorldDirection(s),o.normalize(),r.normalize(),s.normalize();var u=function e(t){if(null===t.offsetParent)return{left:0,top:0};if("surface"===t.className)return{left:0,top:0};var a=e(t.offsetParent);return{left:a.left+t.offsetLeft,top:a.top+t.offsetTop}}(t.current);u.left+=t.current.offsetWidth/2,u.top+=t.current.offsetHeight/2,u.left/=e.resolutionScale,u.top/=e.resolutionScale;var d=n.clone();d.addScaledVector(o,u.left).addScaledVector(r,u.top).addScaledVector(s,10),l({position:d,rotation:e.mesh.rotation.clone(),up:e.mesh.up.clone()})}),[e,t,a]),r}var q=function(e){var t=Object(n.useRef)(null),a=U(e.parent,t,e.causeUpdate);return i.a.createElement("div",{className:"anchor",ref:t,style:{width:e.width*e.parent.resolutionScale,height:e.height*e.parent.resolutionScale}},a&&i.a.createElement(I,Object.assign({position:a.position,rotation:a.rotation,up:a.up},e),e.children))},A=function e(t,a){return null!==a&&(t===a||e(t,a.parent))};a(220);var J,Q=(J=function(e){return i.a.createElement("div",{className:"pamphlet"},"Hej")},function(e){var t=Object(n.useContext)(M).cameraView;return Object(n.useEffect)((function(){A(t,e.surface.parent)?e.surface.object.element.className="":e.surface.object.element.className="pointer-events-none"}),[t,e.surface]),Object(n.useEffect)((function(){null===t&&e.surface.moveToOriginal()}),[t,e.surface]),i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"surface__content"},i.a.createElement(J,e)),i.a.createElement("div",{className:"surface__overlay ".concat(A(t,e.surface.parent)?"":"surface__overlay--hidden"),onClick:function(){return e.surface.moveToggle()}}))});a(221);function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y=V((function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],r=a[1],l=i.a.createElement(n.Fragment,null,o.map((function(e,t){return i.a.createElement(q,Object.assign({key:t},e,{causeUpdate:o.length}),i.a.createElement(Q,null))})));return i.a.createElement("div",{className:"board"},i.a.createElement("div",{className:"board__content"},i.a.createElement("div",{className:"board__buttons"},i.a.createElement("button",{onClick:function(){return r([].concat(Object(L.a)(o),[X({width:100,height:150,parent:e.surface,resolutionScale:2},j)]))}},"+"),i.a.createElement("button",{disabled:0===o.length,onClick:function(){return r(o.slice(0,-1))}},"-")),i.a.createElement("div",{className:"board__pamphlets"},i.a.createElement(q,Object.assign({width:100,height:150,parent:e.surface,resolutionScale:5,causeUpdate:o.length},j),i.a.createElement(Q,null)),i.a.createElement(q,Object.assign({width:100,height:150,parent:e.surface,resolutionScale:2,causeUpdate:o.length},j),i.a.createElement(Q,null)),i.a.createElement(q,Object.assign({width:100,height:150,parent:e.surface,resolutionScale:1,causeUpdate:o.length},j),i.a.createElement(Q,null)),l)))})),Z=a(116),$=a(243),K=a(244),ee=a(163),te={good:[80,240,230,255],fair:[80,204,170,255],moderate:[240,230,65,255],poor:[255,80,80,255],veryPoor:[150,0,50,255]},ae=[te.good,te.fair,te.moderate,te.poor,te.veryPoor],ne=[0,20,35,50,100,"\u221e"],ie=(Object(ee.a)().domain([10,20,25,50]).range(ae),Object(ee.a)().domain([20,35,50,100]).range(ae)),oe=a(117),re=a(113),se=a(118),le=a(5),ce=a.n(le);a(222);function ue(e){return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3]/255,")")}var de=function(e){function t(){return Object(d.a)(this,t),Object(oe.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(se.a)(t,e),Object(m.a)(t,[{key:"_render",value:function(){var e=this.props,t=e.title,a=(e.unit,e.colors),n=e.labels;if(a.length!==n.length-1)throw new Error("With N colors, there must be N+1 labels.");var o=250/a.length,r=a.map((function(e,t){return i.a.createElement("rect",{width:o,height:30,x:o*t,fill:ue(a[t]),key:t})})),s=n.map((function(e,t){return i.a.createElement("text",{x:o*t,dy:"1.2em",textAnchor:"middle",key:t},e)}));return i.a.createElement("div",{className:"map-legend"},i.a.createElement("svg",{width:270,height:70},i.a.createElement("g",{transform:"translate(".concat(10," ").concat(10,")")},i.a.createElement("g",null,i.a.createElement("text",{x:125,dy:"5",textAnchor:"middle",className:"map-legend__title"},t)),i.a.createElement("g",{transform:"translate(0 10)"},r),i.a.createElement("g",{transform:"translate(0 ".concat(40,")")},s))))}}]),t}(Z.a);de.propTypes={title:ce.a.string.isRequired,unit:ce.a.string,colors:ce.a.array.isRequired,labels:ce.a.array.isRequired};var me=de,pe=a(184);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ye=function(e){var t=e.reduce((function(e,t){var a=t.location,n=t.sensor,i=Object(pe.a)(t,["location","sensor"]);return e.hasOwnProperty(a.id)||(e[a.id]={sensors:{},average_measurements:null,position:[parseFloat(a.longitude),parseFloat(a.latitude),parseFloat(a.altitude)]}),e[a.id].sensors.hasOwnProperty(n.id)||(e[a.id].sensors[n.id]=ve({},n,{measurements:[]})),e[a.id].sensors[n.id].measurements.push(ve({},i)),e}),{});return Object.keys(t).map((function(e){var a=t[e];a.sensors=Object.keys(a.sensors).map((function(e){return a.sensors[e]}));var n=a.sensors.reduce((function(e,t){return t.measurements.forEach((function(t){t.sensordatavalues.forEach((function(t){e.hasOwnProperty(t.value_type)||(e[t.value_type]={sum:0,count:0}),e[t.value_type].sum+=parseFloat(t.value),e[t.value_type].count+=1}))})),e}),{});return a.average_measurements=Object.keys(n).reduce((function(e,t){return ve({},e,Object(l.a)({},t,n[t].sum/n[t].count))}),{}),a}))},fe=a(177),ge=(a(223),ye(fe));console.log(ge);var we=V((function(){var e=Object(n.useState)({latitude:59.305477,longitude:18.105203,zoom:15,bearing:0,pitch:0,width:1e3,height:1e3}),t=Object(s.a)(e,2),a=t[0],o=t[1],r=[new K.a({id:"particles-layer",data:ge,lineWidthUnits:"pixels",getRadius:30,getFillColor:function(e){return ie(e.average_measurements.P1)},getLineColor:[0,0,0,255],getLineWidth:10})];return i.a.createElement("div",null,i.a.createElement($.a,{viewState:a,onViewStateChange:function(e){var t=e.viewState;return o(t)},layers:r,controller:!0},i.a.createElement(Z.c,{mapStyle:"http://localhost:8080/styles/klokantech-basic/style.json"},i.a.createElement("div",{className:"mapboxgl-ctrl-bottom-right"},i.a.createElement(Z.b,{onViewportChange:function(e){return o(e)}})),i.a.createElement("div",{className:"mapboxgl-ctrl-bottom-left"},i.a.createElement(me,{title:"PM10",colors:ae,labels:ne})))))}));a(227);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _e=Ee({width:1e3,height:1e3,position:new c.mb(1620,0,-940),rotation:new c.j(0,-2*Math.PI/3,0),up:new c.mb(0,1,0)},j),Oe=Ee({width:1e3,height:1e3,position:new c.mb(935,0,-265),rotation:new c.j(0,-5*Math.PI/6,0),up:new c.mb(0,1,0)},j),Se=Ee({width:1e3,height:1e3,position:new c.mb(0,0,-20),rotation:new c.j(0,Math.PI,0),up:new c.mb(0,1,0)},j),je=Ee({width:1e3,height:1e3,position:new c.mb(-930,0,-270),rotation:new c.j(0,5*Math.PI/6,0),up:new c.mb(0,1,0)},j),Pe=Ee({width:1e3,height:1e3,position:new c.mb(-1620,0,-940),rotation:new c.j(0,2*Math.PI/3,0),up:new c.mb(0,1,0)},j),xe=V((function(){return i.a.createElement("div",{className:"embedded"},i.a.createElement("div",{id:"customize-script-container"}),i.a.createElement(u.a,{url:"https://www.youtube.com/watch?v=soICQ3B2kEk"}))}));var Te=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),o=a[0],r=a[1];return Object(n.useEffect)((function(){E.goToSurface(o)}),[o]),i.a.createElement(n.Fragment,null,i.a.createElement(M.Provider,{value:{cameraView:o,setCameraView:r}},i.a.createElement(I,_e,i.a.createElement(B,null)),i.a.createElement(I,Oe,i.a.createElement(xe,null)),i.a.createElement(I,Se,i.a.createElement(Y,null)),i.a.createElement(I,je,i.a.createElement(we,null)),i.a.createElement(I,Pe,i.a.createElement(B,null))),i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"app__content"}),i.a.createElement("div",{className:"app__overlay"},null!==o&&i.a.createElement("div",{className:"app__back-to-overlay",onClick:function(){return r(null)}},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"6 6 36 36"},i.a.createElement("path",{d:"M40 22h-24.34l11.17-11.17-2.83-2.83-16 16 16 16 2.83-2.83-11.17-11.17h24.34v-4z"})),i.a.createElement("div",null,i.a.createElement("span",null,"Back to overview"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[206,1,2]]]);
//# sourceMappingURL=main.c4b78eb7.chunk.js.map