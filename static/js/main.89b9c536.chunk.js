(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){},15:function(e,t,a){e.exports=a.p+"static/media/room.876c2022.glb"},18:function(e,t,a){e.exports=a(39)},23:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(8),r=a.n(o),s=(a(23),a(3)),c=a(6),l=a(1),m=a(12),h=a(4),u=a(5),d=a(16),p=a(13),w=a(17),f=a(2),v=a(14),g=a.n(v),y=function(){function e(){Object(h.a)(this,e),this.camera=new l.k(75,window.innerWidth/window.innerHeight,1,5e3),this.defaultPosition=new l.p(0,0,-1800),this.defaultRotation=new l.e(0,Math.PI,0),this.camera.position.copy(this.defaultPosition),this.camera.rotation.copy(this.defaultRotation),this.transitionInfo={targetPosition:null,targetRotation:null},this.positionTween=null,this.rotationTween=null}return Object(u.a)(e,[{key:"goToOverview",value:function(){this.transition(this.defaultPosition,this.defaultRotation)}},{key:"goToSurface",value:function(e){if(null!==e){this.camera.up.copy(e.mesh.up);var t=l.r.degToRad(this.camera.fov),a=200/window.innerHeight,n=e.height/(1-a)/(2*Math.tan(t/2)),i=new l.p;e.mesh.getWorldPosition(i);var o=new l.p;e.mesh.getWorldDirection(o),o.multiplyScalar(n),o.add(i);var r=this.camera.position.clone(),s=this.camera.rotation.clone();this.camera.position.copy(o),this.camera.lookAt(i);var c=this.camera.rotation.clone();this.camera.position.copy(r),this.camera.rotation.copy(s),this.transition(o,c)}else this.goToOverview()}},{key:"transition",value:function(e,t){var a=this;this.transitionInfo={targetPosition:e,targetRotation:t};this.positionTween=new f.Tween(this.camera.position).easing(f.Easing.Cubic.Out).to({x:e.x,y:e.y,z:e.z},800).start();var n=new l.n;n.setFromEuler(this.camera.rotation);var i=new l.n;i.setFromEuler(t);var o=new l.n;this.rotationTween=new f.Tween({t:0}).to({t:1},800).easing(f.Easing.Cubic.Out).on("update",function(e){var t=e.t;l.n.slerp(n,i,o,t),a.camera.quaternion.copy(o)}).start()}},{key:"isTransitionRunning",value:function(){return null!==this.positionTween&&null!==this.rotationTween&&(this.positionTween.isPlaying()||this.rotationTween.isPlaying())}},{key:"toCamera",value:function(e){var t=this.camera.position.clone(),a=this.camera.rotation.clone(),n=this.isTransitionRunning();n&&(this.camera.position.copy(this.transitionInfo.targetPosition),this.camera.rotation.copy(this.transitionInfo.targetRotation));var i=l.r.degToRad(this.camera.fov),o=160/window.innerHeight,r=e.height/(1-o)/(2*Math.tan(i/2)),s=new l.p;this.camera.getWorldPosition(s);var c=new l.p;this.camera.getWorldDirection(c),c.multiplyScalar(r),c.add(s);var m=e.mesh.position.clone(),h=e.mesh.rotation.clone();e.mesh.position.copy(c),e.mesh.lookAt(s);var u=e.mesh.rotation.clone();return e.mesh.position.copy(m),e.mesh.rotation.copy(h),n&&(this.camera.position.copy(t),this.camera.rotation.copy(a)),[c,u]}}]),e}(),E=a(15),b=a.n(E),O=new y,j=new l.o,C=new l.o,T=new l.o,P={glScene:j,cssScene:T,toCamera:function(e){return O.toCamera(e)}},V=new l.a(200,200,200),S=new l.i({color:16711680,emissive:0,specular:1118481,side:l.d,flatShading:!1,shininess:30}),k=new l.g(V,S);k.position.z=-250,k.position.x=250,k.position.y=250,j.add(k);var z=new l.g(V,S.clone());z.castShadow=!0,z.material.transparent=!0,z.material.opacity=0,z.position.copy(k.position),C.add(z),(new l.f).load(b.a,function(e){e.scene.scale.multiplyScalar(100),e.scene.rotation.y=Math.PI,e.scene.position.y=-500,e.scene.position.z=-500,e.scene.children[0].receiveShadow=!0,C.add(e.scene)});var F=new l.m(16777215,.8,0,2);F.castShadow=!0,F.position.z=-1e3,F.shadow.mapSize.width=2048,F.shadow.mapSize.height=2048,F.shadow.camera.near=.5,F.shadow.camera.far=5e3,j.add(F),C.add((new l.m).copy(F));var x=new l.q({alpha:!0});x.setClearColor(0,0),x.setPixelRatio(window.devicePixelRatio),x.setSize(window.innerWidth,window.innerHeight),x.domElement.style.position="absolute",x.domElement.style.top=0,x.domElement.style.left=0,x.shadowMap.enabled=!0,document.getElementById("canvas").appendChild(x.domElement);var _=new l.c;_.setSize(window.innerWidth,window.innerHeight),_.domElement.style.position="absolute",_.domElement.style.top=0,_.domElement.style.left=0,document.getElementById("canvas").appendChild(_.domElement);var N=new l.q({alpha:!0});N.setClearColor(0,0),N.setPixelRatio(window.devicePixelRatio),N.setSize(window.innerWidth,window.innerHeight),N.domElement.style.position="absolute",N.domElement.style.top=0,N.domElement.style.left=0,N.domElement.style.pointerEvents="none",document.getElementById("canvas").appendChild(N.domElement);var W=g()(function(){O.camera.aspect=window.innerWidth/window.innerHeight,O.camera.updateProjectionMatrix(),x.setSize(window.innerWidth,window.innerHeight),_.setSize(window.innerWidth,window.innerHeight),N.setSize(window.innerWidth,window.innerHeight)},100);window.addEventListener("resize",W);!function e(t){requestAnimationFrame(e),k.rotation.x+=.01,z.rotation.x+=.01,k.rotation.y+=.01,z.rotation.y+=.01,x.render(C,O.camera),_.render(T,O.camera),N.render(j,O.camera),Object(f.update)(t)}();a(11);var R=new l.h({opacity:0,color:0,side:l.d,blending:l.j}),I=function(){function e(){Object(h.a)(this,e),this.initialize.apply(this,arguments)}return Object(u.a)(e,[{key:"initialize",value:function(e){var t=this,a=e.width,n=e.height,i=e.position,o=e.rotation,r=e.up,s=e.glScene,c=e.cssScene,m=e.toCamera,h=(e.isClickable,e.scaleFactor),u=void 0===h?1:h,d=e.parent,p=void 0===d?null:d;this.width=a,this.height=n,this.scaleFactor=u,this.originalPosition=i.clone(),this.originalRotation=o.clone(),this.originalUp=r,this.atOriginalPosition=!0,this.parent=p,this.toCamera=function(){return m(t)},this.element=document.createElement("div"),this.element.style.width="".concat(a/u,"px"),this.element.style.height="".concat(n/u,"px"),this.element.style.opacity=1,this.object=new l.b(this.element),this.object.position.copy(i),this.object.rotation.copy(o),this.object.scale.set(u,u,u),this.geometry=new l.l(a,n),this.mesh=new l.g(this.geometry,R),this.mesh.position.copy(i),this.mesh.rotation.copy(o),this.mesh.up=r,this.mesh.castShadow=!1,this.mesh.receiveShadow=!0,s.add(this.mesh),c.add(this.object),x.render(C,O.camera),_.render(T,O.camera),N.render(j,O.camera)}},{key:"moveToCamera",value:function(){var e=this.toCamera(),t=Object(s.a)(e,2),a=t[0],n=t[1];this.mesh.position.manhattanDistanceTo(a)<Number.EPSILON||(this.moveTransition(a,n),this.atOriginalPosition=!1)}},{key:"moveToOriginal",value:function(){this.mesh.position.manhattanDistanceTo(this.originalPosition)<Number.EPSILON||(this.moveTransition(this.originalPosition,this.originalRotation),this.atOriginalPosition=!0)}},{key:"moveToggle",value:function(){this.atOriginalPosition?this.moveToCamera():this.moveToOriginal()}},{key:"moveTransition",value:function(e,t){var a=this;new f.Tween(this.object.position).easing(f.Easing.Cubic.Out).to({x:e.x,y:e.y,z:e.z},200).start(),new f.Tween(this.mesh.position).easing(f.Easing.Cubic.Out).to({x:e.x,y:e.y,z:e.z},200).start();var n=new l.n;n.setFromEuler(this.mesh.rotation);var i=new l.n;i.setFromEuler(t);var o=new l.n;new f.Tween({t:0}).to({t:1},200).easing(f.Easing.Cubic.Out).on("update",function(e){var t=e.t;l.n.slerp(n,i,o,t),a.mesh.quaternion.copy(o),a.object.quaternion.copy(o)}).start()}}]),e}(),H=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).surfaceData=new I(e),a}return Object(w.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return Object(o.createPortal)(i.a.createElement("div",{className:"surface",style:{fontSize:"".concat(10/this.surfaceData.scaleFactor,"px")}},Object(n.cloneElement)(this.props.children,{surface:this.surfaceData})),this.surfaceData.element)}}]),t}(n.Component);function M(e){return function(t){var a=t.cameraView===t.surface,o=null===t.cameraView;return i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"surface__content ".concat(a?"":"surface__content--no-pointer")},i.a.createElement(e,t)),i.a.createElement("div",{className:"surface__overlay ".concat(o?"":"surface__overlay--hidden"),onClick:function(){return t.setCameraView(t.surface)}}))}}a(35);var D=M(function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),o=a[0],r=a[1],c=Object(n.useRef)(null),l=e.cameraView===e.surface;return i.a.createElement("div",{className:"test"},i.a.createElement("h1",null,"Hello World"),i.a.createElement("p",null,o),l&&i.a.createElement("h3",null,"Camera is here"),i.a.createElement("button",{onClick:function(){return r(o+1)},ref:c},"Click me"))});function B(e,t){var a=Object(n.useState)(null),i=Object(s.a)(a,2),o=i[0],r=i[1];return Object(n.useLayoutEffect)(function(){var a=e.geometry.getAttribute("position"),n=e.mesh.localToWorld(new l.p(a.getX(0),a.getY(0),a.getZ(0))),i=new l.p;e.mesh.getWorldPosition(i);var o=(new l.p).subVectors(e.mesh.localToWorld(new l.p(1,0,0)),i),s=(new l.p).subVectors(e.mesh.localToWorld(new l.p(0,-1,0)),i),c=new l.p;e.mesh.getWorldDirection(c),o.normalize(),s.normalize(),c.normalize();var m=function e(t){if(null===t.offsetParent)return{left:0,top:0};if("surface"===t.className)return{left:0,top:0};var a=e(t.offsetParent);return{left:a.left+t.offsetLeft,top:a.top+t.offsetTop}}(t.current);m.left+=t.current.offsetWidth/2,m.top+=t.current.offsetHeight/2,m.left*=e.scaleFactor,m.top*=e.scaleFactor;var h=n.clone();h.addScaledVector(o,m.left).addScaledVector(s,m.top).addScaledVector(c,10),r({position:h,rotation:e.mesh.rotation.clone(),up:e.mesh.up.clone()})},[e,t]),o}var q=function(e){var t=Object(n.useRef)(null),a=B(e.parent,t);return i.a.createElement("div",{className:"anchor",ref:t,style:{width:e.width/e.parent.scaleFactor,height:e.height/e.parent.scaleFactor}},a&&i.a.createElement(H,Object.assign({position:a.position,rotation:a.rotation,up:a.up},e),e.children))},L=function e(t,a){return null!==a&&(t===a||e(t,a.parent))};a(36);var A,J=(A=function(e){return i.a.createElement("div",{className:"pamphlet"},"Hej")},function(e){return Object(n.useEffect)(function(){L(e.cameraView,e.surface.parent)?e.surface.object.element.className="":e.surface.object.element.className="pointer-events-none"},[e.cameraView,e.surface]),Object(n.useEffect)(function(){null===e.cameraView&&e.surface.moveToOriginal()},[e.cameraView,e.surface]),i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"surface__content"},i.a.createElement(A,e)),i.a.createElement("div",{className:"surface__overlay ".concat(L(e.cameraView,e.surface.parent)?"":"surface__overlay--hidden"),onClick:function(){return e.surface.moveToggle()}}))});a(37);var U=M(function(e){return i.a.createElement("div",{className:"board"},i.a.createElement("div",{className:"board__content"},i.a.createElement(q,Object.assign({width:100,height:150,parent:e.surface,scaleFactor:.2},P),i.a.createElement(J,{cameraView:e.cameraView,setCameraView:e.setCameraView})),i.a.createElement(q,Object.assign({width:100,height:150,parent:e.surface,scaleFactor:.5},P),i.a.createElement(J,{cameraView:e.cameraView,setCameraView:e.setCameraView})),i.a.createElement(q,Object.assign({width:100,height:150,parent:e.surface,scaleFactor:1},P),i.a.createElement(J,{cameraView:e.cameraView,setCameraView:e.setCameraView}))))}),X=(a(38),Object(c.a)({width:1e3,height:1e3,position:new l.p(500,0,-500),rotation:new l.e(0,-Math.PI/2,0),up:new l.p(0,1,0)},P)),Y=Object(c.a)({width:1e3,height:1e3,position:new l.p(0,0,0),rotation:new l.e(0,Math.PI,0),up:new l.p(0,1,0)},P),Z=Object(c.a)({width:1e3,height:1e3,position:new l.p(-500,0,-500),rotation:new l.e(0,Math.PI/2,0),up:new l.p(0,1,0)},P),$=Object(c.a)({width:1e3,height:1e3,position:new l.p(0,-500,-500),rotation:new l.e(Math.PI/2,Math.PI,0),up:new l.p(0,0,1)},P),G=M(function(){return i.a.createElement("div",{className:"embedded"},i.a.createElement("div",{id:"customize-script-container"}),i.a.createElement(m.Helmet,null,i.a.createElement("script",{type:"text/javascript",src:"https://darksky.net/widget/graph/59.8194,17.7822/si12/en.js?width=100%&height=500&title=Hammarby&textColor=333333&bgColor=FFFFFF&transparency=true&fontFamily=Default&customFont=&units=si&graph=temperature_graph&timeColor=333333&tempColor=333333&lineColor=333333&markerColor=333333"})))});var K=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),o=a[0],r=a[1];return Object(n.useEffect)(function(){O.goToSurface(o)},[o]),i.a.createElement(n.Fragment,null,i.a.createElement(H,X,i.a.createElement(G,{cameraView:o,setCameraView:r})),i.a.createElement(H,Y,i.a.createElement(U,{cameraView:o,setCameraView:r})),i.a.createElement(H,Z,i.a.createElement(D,{cameraView:o,setCameraView:r})),i.a.createElement(H,$,i.a.createElement(D,{cameraView:o,setCameraView:r})),i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"app__content"}),i.a.createElement("div",{className:"app__overlay"},null!==o&&i.a.createElement("div",{className:"app__back-to-overlay",onClick:function(){return r(null)}},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"6 6 36 36"},i.a.createElement("path",{d:"M40 22h-24.34l11.17-11.17-2.83-2.83-16 16 16 16 2.83-2.83-11.17-11.17h24.34v-4z"})),i.a.createElement("div",null,i.a.createElement("span",null,"Back to overview"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.89b9c536.chunk.js.map